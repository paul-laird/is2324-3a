<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Add Item</title>

</head>
<body>
  <form action="/add" onsubmit="add()" method="POST">
    <!-- This should not post - use preventDefault so as not to submit. -->
    Name: <input type="text", name="name" id="name">
    Email: <input type="text", name="email" id="email">
  </form>    
  <button type="submit" name="submit" id="sub">Add</button>
  <script>

  let add=(e)=>{
    e.preventDefault();
    alert("Testing: Hello world");//remove this later
    let n=document.getElementById("name").value
    let em=document.getElementById("email").value
    fetch("https://isc.uksouth.cloudapp.azure.com:8080/addapi/name/"+n+"/email/"+em, 
    {method: "POST"})
      .then(resp => resp.json())
      .then(j=>{
        alert(j.Result);
        document.getElementById("name").val('');
        document.getElementById("email").val('');
      }).catch(m=>alert("Error: "+m))
    alert(n+em);
  }
  const sub = document.getElementById("sub");
  sub.addEventListener("click", add, false);
  sub.addEventListener("submit", add, false);
</script>
</body>
</html>
